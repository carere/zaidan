{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "calendar",
  "dependencies": ["corvu", "lucide-solid"],
  "registryDependencies": ["button"],
  "files": [
    {
      "path": "src/registry/ui/calendar.tsx",
      "content": "import Calendar from \"corvu/calendar\";\nimport { ChevronLeft, ChevronRight } from \"lucide-solid\";\nimport { type ComponentProps, Index, mergeProps, Show, splitProps } from \"solid-js\";\nimport { cn } from \"@/lib/utils\";\nimport { Button, buttonVariants } from \"@/registry/ui/button\";\n\ntype CalendarSingleValue = Date | null;\ntype CalendarMultipleValue = Date[];\ntype CalendarRangeValue = { from: Date | null; to: Date | null };\n\ntype CalendarBaseProps = Omit<ComponentProps<\"div\">, \"onChange\"> & {\n  /**\n   * Whether to show days from the previous/next months\n   * @default true\n   */\n  showOutsideDays?: boolean;\n  /**\n   * Whether to always show 6 weeks in the calendar\n   * @default false\n   */\n  fixedWeeks?: boolean;\n  /**\n   * Number of months to display\n   * @default 1\n   */\n  numberOfMonths?: number;\n  /**\n   * Function to disable specific dates\n   */\n  disabled?: (date: Date) => boolean;\n  /**\n   * The controlled month to display\n   */\n  month?: Date;\n  /**\n   * Callback when the displayed month changes\n   */\n  onMonthChange?: (month: Date) => void;\n  /**\n   * The initial month to display (uncontrolled)\n   */\n  defaultMonth?: Date;\n  /**\n   * Which day of the week to start on (0 = Sunday, 1 = Monday, etc.)\n   * @default 1\n   */\n  weekStartsOn?: 0 | 1 | 2 | 3 | 4 | 5 | 6;\n};\n\ntype CalendarSingleProps = CalendarBaseProps & {\n  mode?: \"single\";\n  value?: CalendarSingleValue;\n  onValueChange?: (value: CalendarSingleValue) => void;\n  defaultValue?: CalendarSingleValue;\n};\n\ntype CalendarMultipleProps = CalendarBaseProps & {\n  mode: \"multiple\";\n  value?: CalendarMultipleValue;\n  onValueChange?: (value: CalendarMultipleValue) => void;\n  defaultValue?: CalendarMultipleValue;\n};\n\ntype CalendarRangeProps = CalendarBaseProps & {\n  mode: \"range\";\n  value?: CalendarRangeValue;\n  onValueChange?: (value: CalendarRangeValue) => void;\n  defaultValue?: CalendarRangeValue;\n};\n\ntype CalendarProps = CalendarSingleProps | CalendarMultipleProps | CalendarRangeProps;\n\nconst CalendarComponent = (props: CalendarProps) => {\n  const mergedProps = mergeProps(\n    {\n      mode: \"single\" as const,\n      showOutsideDays: true,\n      fixedWeeks: false,\n      numberOfMonths: 1,\n      weekStartsOn: 1 as const,\n    },\n    props,\n  );\n\n  const [local, others] = splitProps(mergedProps, [\n    \"class\",\n    \"mode\",\n    \"value\",\n    \"onValueChange\",\n    \"defaultValue\",\n    \"showOutsideDays\",\n    \"fixedWeeks\",\n    \"numberOfMonths\",\n    \"disabled\",\n    \"month\",\n    \"onMonthChange\",\n    \"defaultMonth\",\n    \"weekStartsOn\",\n  ]);\n\n  const formatMonth = (date: Date) => {\n    return date.toLocaleString(\"default\", { month: \"long\", year: \"numeric\" });\n  };\n\n  const formatWeekday = (date: Date) => {\n    return date.toLocaleString(\"default\", { weekday: \"short\" }).slice(0, 2);\n  };\n\n  return (\n    <Calendar\n      mode={local.mode}\n      value={local.value as Date | null}\n      onValueChange={local.onValueChange as (value: Date | null) => void}\n      initialValue={local.defaultValue as Date | null}\n      month={local.month}\n      onMonthChange={local.onMonthChange}\n      initialMonth={local.defaultMonth}\n      numberOfMonths={local.numberOfMonths}\n      fixedWeeks={local.fixedWeeks}\n      disableOutsideDays={!local.showOutsideDays}\n      disabled={local.disabled}\n      startOfWeek={local.weekStartsOn}\n    >\n      {(calendarProps) => (\n        <div\n          data-slot=\"calendar\"\n          class={cn(\n            \"cn-calendar group/calendar bg-background p-3\",\n            \"[[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent\",\n            local.class,\n          )}\n          {...others}\n        >\n          <div class=\"relative flex flex-col gap-4 md:flex-row\">\n            <Index each={calendarProps.months}>\n              {(monthData, index) => (\n                <div data-slot=\"calendar-month\" class=\"flex w-full flex-col gap-4\">\n                  <div\n                    data-slot=\"calendar-month-caption\"\n                    class=\"flex h-(--cell-size) w-full items-center justify-center px-(--cell-size)\"\n                  >\n                    <h2\n                      class=\"select-none font-medium text-sm\"\n                      data-slot=\"calendar-label\"\n                      id={calendarProps.labelIds[index]?.()}\n                    >\n                      {formatMonth(monthData().month)}\n                    </h2>\n                  </div>\n                  <Calendar.Table index={index} class=\"w-full border-collapse\">\n                    <thead data-slot=\"calendar-weekdays\">\n                      <tr class=\"flex\">\n                        <Index each={calendarProps.weekdays}>\n                          {(weekday) => (\n                            <Calendar.HeadCell\n                              data-slot=\"calendar-weekday\"\n                              class=\"flex-1 select-none rounded-(--cell-radius) font-normal text-[0.8rem] text-muted-foreground\"\n                            >\n                              {formatWeekday(weekday())}\n                            </Calendar.HeadCell>\n                          )}\n                        </Index>\n                      </tr>\n                    </thead>\n                    <tbody data-slot=\"calendar-weeks\">\n                      <Index each={monthData().weeks}>\n                        {(week) => (\n                          <tr data-slot=\"calendar-week\" class=\"mt-2 flex w-full\">\n                            <Index each={week()}>\n                              {(day) => (\n                                <Show when={day()} fallback={<td class=\"flex-1 p-0\" />}>\n                                  {(d) => (\n                                    <CalendarDay\n                                      day={d()}\n                                      month={monthData().month}\n                                      mode={local.mode}\n                                      value={calendarProps.value}\n                                    />\n                                  )}\n                                </Show>\n                              )}\n                            </Index>\n                          </tr>\n                        )}\n                      </Index>\n                    </tbody>\n                  </Calendar.Table>\n                </div>\n              )}\n            </Index>\n            {/* Navigation */}\n            <nav\n              data-slot=\"calendar-nav\"\n              class=\"absolute inset-x-0 top-0 flex w-full items-center justify-between gap-1\"\n            >\n              <Calendar.Nav\n                action=\"prev-month\"\n                as={Button}\n                variant=\"ghost\"\n                class={cn(\n                  buttonVariants({ variant: \"ghost\" }),\n                  \"size-(--cell-size) select-none p-0\",\n                )}\n              >\n                <ChevronLeft class=\"size-4\" />\n                <span class=\"sr-only\">Previous month</span>\n              </Calendar.Nav>\n              <Calendar.Nav\n                action=\"next-month\"\n                as={Button}\n                variant=\"ghost\"\n                class={cn(\n                  buttonVariants({ variant: \"ghost\" }),\n                  \"size-(--cell-size) select-none p-0\",\n                )}\n              >\n                <ChevronRight class=\"size-4\" />\n                <span class=\"sr-only\">Next month</span>\n              </Calendar.Nav>\n            </nav>\n          </div>\n        </div>\n      )}\n    </Calendar>\n  );\n};\n\ntype CalendarDayProps = {\n  day: Date;\n  month: Date;\n  mode: \"single\" | \"multiple\" | \"range\";\n  value: Date | null | Date[] | { from: Date | null; to: Date | null };\n};\n\nconst CalendarDay = (props: CalendarDayProps) => {\n  const isOutsideMonth = () => props.day.getMonth() !== props.month.getMonth();\n\n  const isSelected = () => {\n    const value = props.value;\n    if (value === null || value === undefined) return false;\n\n    if (value instanceof Date) {\n      return isSameDay(value, props.day);\n    }\n    if (Array.isArray(value)) {\n      return value.some((d) => isSameDay(d, props.day));\n    }\n    if (typeof value === \"object\" && \"from\" in value) {\n      const { from, to } = value as CalendarRangeValue;\n      if (from && isSameDay(from, props.day)) return true;\n      if (to && isSameDay(to, props.day)) return true;\n      return false;\n    }\n    return false;\n  };\n\n  const isRangeStart = () => {\n    const value = props.value;\n    if (!value || typeof value !== \"object\" || !(\"from\" in value)) return false;\n    const { from } = value as CalendarRangeValue;\n    return from && isSameDay(from, props.day);\n  };\n\n  const isRangeEnd = () => {\n    const value = props.value;\n    if (!value || typeof value !== \"object\" || !(\"from\" in value)) return false;\n    const { to } = value as CalendarRangeValue;\n    return to && isSameDay(to, props.day);\n  };\n\n  const isInRange = () => {\n    const value = props.value;\n    if (!value || typeof value !== \"object\" || !(\"from\" in value)) return false;\n    const { from, to } = value as CalendarRangeValue;\n    if (!from || !to) return false;\n    return props.day > from && props.day < to;\n  };\n\n  const isSingleSelected = () => isSelected() && !isRangeStart() && !isRangeEnd() && !isInRange();\n\n  return (\n    <Calendar.Cell\n      data-slot=\"calendar-day\"\n      class={cn(\n        \"group/day relative aspect-square h-full w-full flex-1 select-none rounded-(--cell-radius) p-0 text-center\",\n        \"[&:first-child[data-selected=true]_button]:rounded-l-(--cell-radius)\",\n        \"[&:last-child[data-selected=true]_button]:rounded-r-(--cell-radius)\",\n        isRangeStart() &&\n          \"isolate -z-0 rounded-l-(--cell-radius) bg-muted after:absolute after:inset-y-0 after:right-0 after:w-4 after:bg-muted\",\n        isRangeEnd() &&\n          \"isolate -z-0 rounded-r-(--cell-radius) bg-muted after:absolute after:inset-y-0 after:left-0 after:w-4 after:bg-muted\",\n        isInRange() && \"rounded-none\",\n      )}\n      data-selected={isSelected() || undefined}\n      data-outside={isOutsideMonth() || undefined}\n    >\n      <Calendar.CellTrigger\n        day={props.day}\n        month={props.month}\n        data-slot=\"calendar-day-button\"\n        class={cn(\n          buttonVariants({ variant: \"ghost\", size: \"icon\" }),\n          \"relative isolate z-10 flex aspect-square size-auto w-full min-w-(--cell-size) flex-col gap-1 border-0 font-normal leading-none\",\n          // Focus states\n          \"group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-[3px] group-data-[focused=true]/day:ring-ring/50\",\n          // Today styling\n          \"data-[today=true]:data-[selected=true]:rounded-none data-[today=true]:rounded-(--cell-radius) data-[today=true]:bg-muted data-[today=true]:text-foreground\",\n          // Single selection\n          isSingleSelected() && \"bg-primary text-primary-foreground\",\n          // Range selection\n          isRangeStart() &&\n            \"rounded-(--cell-radius) rounded-l-(--cell-radius) bg-primary text-primary-foreground\",\n          isRangeEnd() &&\n            \"rounded-(--cell-radius) rounded-r-(--cell-radius) bg-primary text-primary-foreground\",\n          isInRange() && \"rounded-none bg-muted text-foreground\",\n          // Outside month\n          \"data-[outside=true]:text-muted-foreground data-[outside=true]:aria-selected:text-muted-foreground\",\n          // Disabled\n          \"data-[disabled=true]:text-muted-foreground data-[disabled=true]:opacity-50\",\n        )}\n        data-outside={isOutsideMonth() || undefined}\n      >\n        {props.day.getDate()}\n      </Calendar.CellTrigger>\n    </Calendar.Cell>\n  );\n};\n\n// Helper function\nconst isSameDay = (a: Date, b: Date): boolean => {\n  return (\n    a.getFullYear() === b.getFullYear() &&\n    a.getMonth() === b.getMonth() &&\n    a.getDate() === b.getDate()\n  );\n};\n\nexport { CalendarComponent as Calendar, type CalendarProps };\n",
      "type": "registry:ui"
    }
  ],
  "type": "registry:ui"
}
