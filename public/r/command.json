{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "command",
  "dependencies": [
    "@kobalte/core",
    "lucide-solid"
  ],
  "registryDependencies": [
    "dialog",
    "input-group"
  ],
  "files": [
    {
      "path": "src/registry/ui/command.tsx",
      "content": "import type { DialogRootProps } from \"@kobalte/core/dialog\";\nimport { Search } from \"lucide-solid\";\nimport type { Accessor, ComponentProps, JSX } from \"solid-js\";\nimport {\n  createContext,\n  createMemo,\n  createSignal,\n  mergeProps,\n  Show,\n  splitProps,\n  useContext,\n} from \"solid-js\";\n\nimport { cn } from \"@/lib/utils\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from \"@/registry/ui/dialog\";\nimport { InputGroup, InputGroupAddon, InputGroupInput } from \"@/registry/ui/input-group\";\n\n// ============================================================================\n// Command Context\n// ============================================================================\n\ntype CommandContextValue = {\n  search: Accessor<string>;\n  setSearch: (value: string) => void;\n};\n\nconst CommandContext = createContext<CommandContextValue>();\n\nconst useCommand = () => {\n  const context = useContext(CommandContext);\n  if (!context) {\n    throw new Error(\"useCommand must be used within a Command component\");\n  }\n  return context;\n};\n\n// ============================================================================\n// Command Root\n// ============================================================================\n\ntype CommandProps = ComponentProps<\"div\">;\n\nconst Command = (props: CommandProps) => {\n  const [local, others] = splitProps(props, [\"class\", \"children\"]);\n  const [search, setSearch] = createSignal(\"\");\n\n  return (\n    <CommandContext.Provider value={{ search, setSearch }}>\n      <div\n        data-slot=\"command\"\n        class={cn(\"cn-command flex size-full flex-col overflow-hidden\", local.class)}\n        {...others}\n      >\n        {local.children}\n      </div>\n    </CommandContext.Provider>\n  );\n};\n\n// ============================================================================\n// Command Dialog\n// ============================================================================\n\ntype CommandDialogProps = Omit<DialogRootProps, \"children\"> & {\n  title?: string;\n  description?: string;\n  class?: string;\n  showCloseButton?: boolean;\n  children: JSX.Element;\n};\n\nconst CommandDialog = (rawProps: CommandDialogProps) => {\n  const props = mergeProps(\n    {\n      title: \"Command Palette\",\n      description: \"Search for a command to run...\",\n      showCloseButton: false,\n    } as CommandDialogProps,\n    rawProps,\n  );\n  const [local, others] = splitProps(props, [\n    \"title\",\n    \"description\",\n    \"class\",\n    \"showCloseButton\",\n    \"children\",\n  ]);\n\n  return (\n    <Dialog {...others}>\n      <DialogHeader class=\"sr-only\">\n        <DialogTitle>{local.title}</DialogTitle>\n        <DialogDescription>{local.description}</DialogDescription>\n      </DialogHeader>\n      <DialogContent\n        class={cn(\"cn-command-dialog overflow-hidden p-0\", local.class)}\n        showCloseButton={local.showCloseButton}\n      >\n        {local.children}\n      </DialogContent>\n    </Dialog>\n  );\n};\n\n// ============================================================================\n// Command Input\n// ============================================================================\n\ntype CommandInputProps = Omit<ComponentProps<\"input\">, \"type\">;\n\nconst CommandInput = (props: CommandInputProps) => {\n  const [local, others] = splitProps(props, [\"class\"]);\n  const context = useCommand();\n\n  return (\n    <div data-slot=\"command-input-wrapper\" class=\"cn-command-input-wrapper\">\n      <InputGroup class=\"cn-command-input-group\">\n        <InputGroupInput\n          type=\"text\"\n          data-slot=\"command-input\"\n          class={cn(\n            \"cn-command-input outline-hidden disabled:cursor-not-allowed disabled:opacity-50\",\n            local.class,\n          )}\n          value={context.search()}\n          onInput={(e) => context.setSearch(e.currentTarget.value)}\n          {...others}\n        />\n        <InputGroupAddon>\n          <Search class=\"cn-command-input-icon\" />\n        </InputGroupAddon>\n      </InputGroup>\n    </div>\n  );\n};\n\n// ============================================================================\n// Command List\n// ============================================================================\n\ntype CommandListProps = ComponentProps<\"div\">;\n\nconst CommandList = (props: CommandListProps) => {\n  const [local, others] = splitProps(props, [\"class\"]);\n\n  return (\n    <div\n      data-slot=\"command-list\"\n      role=\"listbox\"\n      class={cn(\"cn-command-list overflow-y-auto overflow-x-hidden\", local.class)}\n      {...others}\n    />\n  );\n};\n\n// ============================================================================\n// Command Empty\n// ============================================================================\n\ntype CommandEmptyProps = ComponentProps<\"div\">;\n\nconst CommandEmpty = (props: CommandEmptyProps) => {\n  const [local, others] = splitProps(props, [\"class\"]);\n\n  return <div data-slot=\"command-empty\" class={cn(\"cn-command-empty\", local.class)} {...others} />;\n};\n\n// ============================================================================\n// Command Group\n// ============================================================================\n\ntype CommandGroupProps = ComponentProps<\"div\"> & {\n  heading?: string;\n};\n\nconst CommandGroup = (props: CommandGroupProps) => {\n  const [local, others] = splitProps(props, [\"class\", \"heading\", \"children\"]);\n\n  return (\n    // biome-ignore lint/a11y/useSemanticElements: <command group needs group role>\n    <div\n      data-slot=\"command-group\"\n      role=\"group\"\n      class={cn(\"cn-command-group\", local.class)}\n      {...others}\n    >\n      <Show when={local.heading}>\n        <div data-slot=\"command-group-heading\" class=\"cn-command-group-heading\" aria-hidden=\"true\">\n          {local.heading}\n        </div>\n      </Show>\n      {local.children}\n    </div>\n  );\n};\n\n// ============================================================================\n// Command Separator\n// ============================================================================\n\ntype CommandSeparatorProps = ComponentProps<\"hr\">;\n\nconst CommandSeparator = (props: CommandSeparatorProps) => {\n  const [local, others] = splitProps(props, [\"class\"]);\n\n  return (\n    <hr data-slot=\"command-separator\" class={cn(\"cn-command-separator\", local.class)} {...others} />\n  );\n};\n\n// ============================================================================\n// Command Item\n// ============================================================================\n\ntype CommandItemProps = ComponentProps<\"div\"> & {\n  value?: string;\n  disabled?: boolean;\n  onSelect?: () => void;\n  keywords?: string[];\n};\n\nconst CommandItem = (props: CommandItemProps) => {\n  const [local, others] = splitProps(props, [\n    \"class\",\n    \"children\",\n    \"value\",\n    \"disabled\",\n    \"onSelect\",\n    \"keywords\",\n  ]);\n  const context = useCommand();\n\n  // Compute visibility based on search value\n  const isVisible = createMemo(() => {\n    const search = context.search().toLowerCase().trim();\n    if (search === \"\") return true;\n\n    const itemValue = (local.value || \"\").toLowerCase();\n    const keywordsMatch = local.keywords?.some((k) => k.toLowerCase().includes(search)) ?? false;\n\n    return itemValue.includes(search) || keywordsMatch;\n  });\n\n  const handleClick = () => {\n    if (!local.disabled && local.onSelect) {\n      local.onSelect();\n    }\n  };\n\n  const handleKeyDown: JSX.EventHandlerUnion<HTMLDivElement, KeyboardEvent> = (e) => {\n    if ((e.key === \"Enter\" || e.key === \" \") && !local.disabled && local.onSelect) {\n      e.preventDefault();\n      local.onSelect();\n    }\n  };\n\n  return (\n    <Show when={isVisible()}>\n      <div\n        data-slot=\"command-item\"\n        role=\"option\"\n        tabIndex={local.disabled ? -1 : 0}\n        data-disabled={local.disabled || undefined}\n        class={cn(\n          \"cn-command-item group/command-item data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0\",\n          local.class,\n        )}\n        onClick={handleClick}\n        onKeyDown={handleKeyDown}\n        {...others}\n      >\n        {local.children}\n      </div>\n    </Show>\n  );\n};\n\n// ============================================================================\n// Command Shortcut\n// ============================================================================\n\ntype CommandShortcutProps = ComponentProps<\"span\">;\n\nconst CommandShortcut = (props: CommandShortcutProps) => {\n  const [local, others] = splitProps(props, [\"class\"]);\n\n  return (\n    <span data-slot=\"command-shortcut\" class={cn(\"cn-command-shortcut\", local.class)} {...others} />\n  );\n};\n\nexport {\n  Command,\n  CommandDialog,\n  CommandEmpty,\n  CommandGroup,\n  CommandInput,\n  CommandItem,\n  CommandList,\n  CommandSeparator,\n  CommandShortcut,\n};\n",
      "type": "registry:ui"
    }
  ],
  "type": "registry:ui"
}